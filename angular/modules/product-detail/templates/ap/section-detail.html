<div class="form-section">
    <div class="form-section-header">
        <h2>Detail</h2></div>
    <div class="form-section-content">

        <!-- select attribute set -->
        <div class="form-group ">
            <div class="width-label">
                <label class="control-label ">Attribute Set</label>
            </div>
            <div class="width-field-normal">
                <div class="ah-select2-dropdown">

                    <select ng-if="controlFlags.variation == 'enable'" class="form-control" disabled>
                        <option disabled>{{ formData.AttributeSet.AttributeSetNameEn }}</option>
                    </select>

                    <!-- dont show if nothing is dataset. to choose from -->
                    <ui-select theme="selectize" loading="refresher.AttributeSetsLoading" 
                    ng-if="controlFlags.variation != 'enable'" ng-model="formData.AttributeSet" ng-show="dataset.AttributeSets.length > 0">
                        <ui-select-match placeholder="Search Attribute Set">
                            <span ng-bind="$select.selected.AttributeSetNameEn"></span>
                            <span ng-show="!$select.selected.AttributeSetNameEn">- Select Attribute Set -</span>
                        </ui-select-match>
                        <ui-select-choices group-by="'_group'" refresh="refresher.AttributeSets($select.search)" refresh-delay="1000" 
                        repeat="item in ($select.search != '' ? dataset.CombinedAttributeSets : dataset.AttributeSets) | filter : $select.search track by item.AttributeSetId">
                            <span ng-bind="item.AttributeSetNameEn"></span>
                        </ui-select-choices>
                    </ui-select>

                    <!-- if nothing is availalbe to pick -->
                    <select class="form-control" ng-if="dataset.AttributeSets.length == 0" disabled>
                        <option disabled>This category has no attribute sets</option>
                    </select>

                </div>


            </div>
            <a class="like-text form-text" ng-if="formData.AttributeSet.AttributeSetId && controlFlags.variation != 'enable'" ng-click="formData.AttributeSet = {}">
                <i class="fa fa-minus-circle color-theme"></i>
            </a>
        </div>

        <!-- for each attribute in attribute set -->
        <div class="form-group" ng-repeat="amap in formData.AttributeSet.AttributeSetMaps">
            <div class="width-label">
                <label class="control-label" ng-class="{'required': amap.Attribute.Required}">
                    {{ amap.Attribute.AttributeNameEn }}
                </label>
            </div>
            <div ng-class="{'width-field-normal': !isHtmlInput(amap.Attribute.DataType), 'width-field-xxl': isHtmlInput(amap.Attribute.DataType)}">

                <select ng-if="isListInput(amap.Attribute.DataType)" ng-required="amap.Attribute.Required && onPublishing" class="form-control"
                ng-model="formData.MasterAttribute[amap.Attribute.AttributeId]" ng-class="{'has-error' : $root.isInvalid(form.AmapInput{{ $index }}) }"
                name="AmapInput{{$index}}" ng-options="item as item.AttributeValue.AttributeValueEn for item in amap.Attribute.AttributeValueMaps track by item.AttributeValueId">
                    <option disabled value="" selected>- Select option -</option>
                </select>

                <div ng-if="isHtmlInput(amap.Attribute.DataType)">
                    <textarea ng-required="amap.Attribute.Required && onPublishing" ng-class="{'has-error' : $root.isInvalid(form.AmapInput{{ $index }}) }"
                    ng-model="formData.MasterAttribute[amap.Attribute.AttributeId]" name="AmapInput{{$index}}" class="form-control"
                    ng-ckeditor="ckOptions"></textarea>
                </div>

                <input ng-if="isFreeTextInput(amap.Attribute.DataType)" ng-class="{'has-error' : $root.isInvalid(form.AmapInput{{ $index }}) }"
                ng-required="amap.Attribute.Required && onPublishing" type="text" class="form-control" name="AmapInput{{$index}}"
                ng-model="formData.MasterAttribute[amap.Attribute.AttributeId]" />
		
		<div ng-if="isCheckboxInput(amap.Attribute.DataType)" 
		       ng-init="formData.MasterAttribute[amap.Attribute.AttributeId] = {}">
			<div class="checkbox" ng-repeat="vmap in amap.Attribute.AttributeValueMaps">
			<label>
				<input type="checkbox" ng-model="formData.MasterAttribute[amap.Attribute.AttributeId][vmap.AttributeValueId]"/>
				{{ vmap.AttributeValue.AttributeValueEn }}
			</label>
			</div>	
		</div>

            </div>
        </div>

    </div>
</div>
